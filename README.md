## 주요 기능

### 1. 채팅 기록 관리 시스템 (ChatHistoryManager 클래스)

- **초기화 (init_database)**: 프로그램 시작 시 SQLite 데이터베이스를 생성하고, 채팅 메시지를 저장할 테이블을 만듭니다. 테이블에는 메시지의 `role` (사용자 또는 AI), `content` (메시지 내용), `timestamp` (메시지 발생 시간)를 저장합니다.
- **메시지 추가 (add_message)**: 사용자가 입력한 메시지나 AI의 응답을 데이터베이스에 추가합니다.
- **메시지 가져오기 (get_messages)**: 최근 50개의 메시지를 가져와 화면에 표시합니다.
- **메시지 검색 (search_messages)**: 특정 키워드가 포함된 메시지를 검색하여 결과를 반환합니다.
- **히스토리 삭제 (clear_history)**: 전체 채팅 기록을 삭제할 수 있습니다.

### 2. 메인 애플리케이션 (main 함수)

애플리케이션의 핵심은 Streamlit을 이용한 사용자 인터페이스입니다. 이 애플리케이션은 3가지 주요 메뉴를 제공합니다:

- **채팅**: 사용자가 메시지를 입력하고 OpenAI API를 통해 AI와 대화하는 기능입니다. 사용자 메시지와 AI의 응답은 모두 데이터베이스에 저장됩니다. 또한 AI는 최근 10개의 메시지를 기반으로 답변을 생성합니다.
- **채팅 히스토리**: 사용자가 이전의 채팅 메시지를 확인할 수 있는 메뉴입니다. 최근 100개의 메시지가 화면에 표시됩니다. 각 메시지에는 발생한 시간이 포함됩니다.
- **히스토리 검색**: 사용자가 특정 키워드를 입력하여, 해당 키워드가 포함된 메시지를 검색하고 표시하는 기능입니다.

### 3. 주요 기술 스택

- **Streamlit**: 사용자 인터페이스를 쉽게 만들 수 있는 Python 라이브러리입니다. 사용자와의 상호작용을 웹 애플리케이션 형식으로 처리할 수 있습니다.
- **SQLite**: 간단한 관계형 데이터베이스로, 채팅 기록을 저장하는 데 사용됩니다.
- **OpenAI API**: AI 대화 모델을 이용해 사용자와의 대화를 처리합니다. 이 프로젝트에서는 `gpt-3.5-turbo` 모델을 사용합니다.

### 4. OpenAI API와 Streamlit 연동

- 사용자가 메시지를 입력하면 그 메시지는 OpenAI API로 전송됩니다.
- AI는 최근 10개의 메시지를 기반으로 대답을 생성하며, 이를 스트리밍 방식으로 출력합니다. 스트리밍 방식은 AI의 응답이 조금씩 화면에 표시되는 방식으로, 사용자에게 더 자연스러운 대화 경험을 제공합니다.

### 5. 채팅 초기화 및 API 키 설정

- **대화 초기화**: 사용자가 "대화 초기화" 버튼을 클릭하면 세션 상태의 메시지가 모두 삭제되고 새로운 대화가 시작됩니다.
- **API 키 입력**: 사용자는 OpenAI API 키를 입력해야 AI와 대화할 수 있습니다. API 키는 Streamlit 사이드바에서 입력받습니다.

### 6. 주요 흐름 요약

- **채팅**: 사용자가 메시지를 입력 → OpenAI로 요청 → AI의 응답을 화면에 표시 → 메시지 저장
- **채팅 히스토리**: 데이터베이스에서 저장된 메시지 불러오기 → 최근 100개의 메시지 출력
- **히스토리 검색**: 사용자가 검색어 입력 → 해당 검색어를 포함하는 메시지 출력 → 검색어 강조
